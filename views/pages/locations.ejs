<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<style>
    body,
    html {
        height: 100%;
        background: #222222;
        font-family: 'Lato', sans-serif;
    }

    .container {
        display: block;
        position: relative;
        margin: 40px auto;
        height: auto;
        width: 500px;
        padding: 20px;
    }

    h2 {
        color: #AAAAAA;
    }

    .container ul {
        list-style: none;
        margin: 0;
        padding: 0;
        overflow: auto;
    }

    ul li {
        color: #AAAAAA;
        display: block;
        position: relative;
        float: left;
        width: 100%;
        height: 100px;
        border-bottom: 1px solid #333;
    }

    ul li input[type=radio] {
        position: absolute;
        visibility: hidden;
    }

    ul li label {
        display: block;
        position: relative;
        font-weight: 300;
        font-size: 1.35em;
        padding: 25px 25px 25px 80px;
        margin: 10px auto;
        height: 30px;
        z-index: 9;
        cursor: pointer;
        -webkit-transition: all 0.25s linear;
    }

    ul li:hover label {
        color: #FFFFFF;
    }

    ul li .check {
        display: block;
        position: absolute;
        border: 5px solid #AAAAAA;
        border-radius: 100%;
        height: 25px;
        width: 25px;
        top: 30px;
        left: 20px;
        z-index: 5;
        transition: border .25s linear;
        -webkit-transition: border .25s linear;
    }

    ul li:hover .check {
        border: 5px solid #FFFFFF;
    }

    ul li .check::before {
        display: block;
        position: absolute;
        content: '';
        border-radius: 100%;
        height: 15px;
        width: 15px;
        top: 5px;
        left: 5px;
        margin: auto;
        transition: background 0.25s linear;
        -webkit-transition: background 0.25s linear;
    }

    input[type=radio]:checked~.check {
        border: 5px solid #0DFF92;
    }

    input[type=radio]:checked~.check::before {
        background: #0DFF92;
    }

    input[type=radio]:checked~label {
        color: #0DFF92;
    }

    .signature {
        margin: 10px auto;
        padding: 10px 0;
        width: 100%;
    }

    .signature p {
        text-align: center;
        font-family: Helvetica, Arial, Sans-Serif;
        font-size: 0.85em;
        color: #AAAAAA;
    }

    .signature .much-heart {
        display: inline-block;
        position: relative;
        margin: 0 4px;
        height: 10px;
        width: 10px;
        background: #AC1D3F;
        border-radius: 4px;
        -ms-transform: rotate(45deg);
        -webkit-transform: rotate(45deg);
        transform: rotate(45deg);
    }

    .signature .much-heart::before,
    .signature .much-heart::after {
        display: block;
        content: '';
        position: absolute;
        margin: auto;
        height: 10px;
        width: 10px;
        border-radius: 5px;
        background: #AC1D3F;
        top: -4px;
    }

    .signature .much-heart::after {
        bottom: 0;
        top: auto;
        left: -4px;
    }

    .signature a {
        color: #AAAAAA;
        text-decoration: none;
        font-weight: bold;
    }


    /* Styles for alert... 
            by the way it is so weird when you look at your code a couple of years after you wrote it XD */

    .alert {
        box-sizing: border-box;
        background-color: #0DFF92;
        width: 100%;
        position: relative;
        top: 0;
        left: 0;
        z-index: 300;
        padding: 20px 40px;
        color: #333;
    }

    .alert h2 {
        font-size: 22px;
        color: #232323;
        margin-top: 0;
    }

    .alert p {
        line-height: 1.6em;
        font-size: 18px;
    }

    .alert a {
        color: #232323;
        font-weight: bold;
    }

    .button {
        background-color: #4CAF50;
        border: none;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;

    }
    
    .sample {
	 display: grid;
	 font-family: Avenir;
	 -webkit-text-size-adjust: 100%;
	 -webkit-font-smoothing: antialiased;
}
 .sample2 {
	 box-sizing: border-box;
}
 .inp {
	 position: relative;
	 margin: auto;
	 width: 100%;
	 max-width: 280px;
}
 .inp .label {
	 position: absolute;
	 top: 16px;
	 left: 0;
	 font-size: 16px;
	 color: #aaa;
	 font-weight: 500;
	 transform-origin: 0 0;
	 transition: all 0.2s ease;
}
 .inp .border {
	 position: absolute;
	 bottom: 0;
	 left: 0;
	 height: 2px;
	 width: 100%;
	 background: #07f;
	 transform: scaleX(0);
	 transform-origin: 0 0;
	 transition: all 0.15s ease;
}
 .inp input {
	 -webkit-appearance: none;
	 width: 100%;
	 border: 0;
	 font-family: inherit;
	 padding: 12px 0;
	 height: 48px;
	 font-size: 16px;
	 font-weight: 500;
	 border-bottom: 2px solid #FFFFFF;
	 background: none;
	 border-radius: 0;
	 color: #FFFFFF;
	 transition: all 0.15s ease;
}
 .inp input:hover {
	 background: rgba(34,50,84,0.03);
}
 .inp input:not(:placeholder-shown) + span {
	 color: #aaa;
	 transform: translateY(-26px) scale(0.75);
}
 .inp input:focus {
	 background: none;
	 outline: none;
}
 .inp input:focus + span {
	 color: #FFFFFF;
	 transform: translateY(-26px) scale(0.75);
}
 .inp input:focus + span + .border {
	 transform: scaleX(1);
}
 
    
</style>

<script>
    // Code copied from Facebook to load and initialise Messenger extensions
    (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.com/en_US/messenger.Extensions.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'Messenger'));
</script>
<body>

    <div class="container">
        <form id="preferencesForm">
            <h2>Positions</h2>
            <ul>
            <% 
            locations.forEach((loc,i)=>{
                console.log(loc)
            %>
                <li>
                    <input type="radio" id="option<%= i %>" name="WorkPosition" value="<%= loc.location%>">
                    <label for="option<%= i %>"><%= loc.location%></label>
                    
                    <div class="check"></div>
                </li>
            <%
            }); 
            %>
            <div align="center">
                <label for="inp" class="inp">
                    <input type="text" id="others" placeholder="&nbsp;">
                    <span class="label">Others:</span>
                </label>
            </div>
            </ul>
            <div align="center">
                <button type="submit" class="button">Submit</button>
            </div>
            <input type="hidden" id="id" name="id" value="<%= id %>">
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-2.2.1.min.js"
        integrity="sha256-gvQgAFzTH6trSrAWoH1iPo9Xc96QxSZ3feW6kem+O00="
        crossorigin="anonymous"></script>

        <script>
        window.extAsyncInit = function() {
          console.log('Messenger extensions are ready');
         
          // Handle button click
          $('#preferencesForm').submit(function(event) {

            console.log('Submit pressed');
            event.preventDefault();
            var radios = document.getElementsByName('WorkPosition');
            var WorkPosition;
            for (var i = 0, length = radios.length; i < length; i++)
            {
             if (radios[i].checked)
             {
              // do whatever you want with the checked radio
              WorkPosition=radios[i].value
            
              // only one radio can be logically checked, don't check the rest
              break;
             }
            }

            var formData = {
                WorkPosition: WorkPosition,
                fbid: document.getElementById('id').value,
                others: document.getElementById('others').value
            }
            if(formData.WorkPosition != undefined && formData.others != ""){
                alert("You can only choose one from the options or specify your desired position");
            }
            else{
                window.location.replace('https://www.messenger.com/closeWindow/?image_url="asdfasdf"&display_text="Please wait for this window to close"');
                $.get("/LocPrint?id="+formData.fbid+"&WorkPosition="+WorkPosition+"&Others="+formData.others, function (data) {});

            }
          });
          
        }
      </script>
</body>

</html>